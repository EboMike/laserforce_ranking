{% extends "base.html" %}
{% block title %}Players{% endblock %}

{% block html_head %}

<head>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.13.0/css/all.min.css">
    <link rel="stylesheet" href="/assets/css/app.css">
</head>

<style type="text/css">
    .important {
        color: #336699;
    }

    .sidebar {
        margin: 0;
        padding: 0;
        width: 200px;
        background: linear-gradient(180deg, rgba(26, 26, 26, 0.95) 0%, rgba(26, 26, 26, 0.76) 100%);
        position: fixed;
        height: 100%;
        overflow: auto;
    }

    .sidebar a {
        display: block;
        color: white;
        padding: 16px;
        text-decoration: none;
    }

    .sidebar a.active {
        background-color: #0096FF;
        color: white;
    }

    .content {
        margin-top: 20px;
    }

    .userlist {
        border-radius: 15px;
        background: #1A1A1A;
        padding: 1rem;
        margin: auto;
        width: 70%;
        height: 100vh;
        margin-top: 20px;
    }

    .userlist-pos {
        border-radius: 10px;
        padding: 0.2rem;
        margin: 0.9rem;
        background: #262626;
        padding-bottom: 0.5rem;
    }

    .userlist-username-text {
        font-size: 1.5rem;
        position: relative;
        left: 0.75rem;
        bottom: 0.125rem;
    }

    .userlist-info-text {
        float: right;
        right: 0.25rem;
        top: 0.25rem;
        position: relative;
    }

    body {
        background-color: #121212;
    }
</style>

{% endblock %}

{% block content %}

<body>
    <div class="userlist">
        <h1 style="text-align: left; padding-left: 0.5em;">{{ player.codename }}</h2>
        <div class="userlist-pos"><span class="userlist-username-text">ID</span><span class="userlist-info-text">{{ player.id }}</span></div>
        <div class="userlist-pos"><span class="userlist-username-text">IPL ID</span><span class="userlist-info-text">{{ player.ipl_id }}</span></div>
        <div class="userlist-pos"><span class="userlist-username-text">Player ID</span><span class="userlist-info-text">{{ player.player_id }}</span></div>
        <div class="userlist-pos"><span class="userlist-username-text">Codename</span><span class="userlist-info-text">{{ player.codename }}</span></div>
        <div class="userlist-pos"><span class="userlist-username-text">SM5 Win Percent</span><span class="userlist-info-text">{{ (sm5_win_percent*100)|round(1) }}%</span></div>
        <div class="userlist-pos"><span class="userlist-username-text">Laserball Win Percent</span><span class="userlist-info-text">{{ (laserball_win_percent*100)|round(1) }}%</span></div>
        <div class="userlist-pos"><span class="userlist-username-text">Overall Win Percent</span><span class="userlist-info-text">{{ (win_percent*100)|round(1) }}%</span></div>
        <div style="display: flex; float: left;">
            <div class="btn">
                <canvas id="sm5_teams" style="max-width:600px;"></canvas>
                <p>SM5 Teams</p>
            </div>
            <div class="btn">
                <canvas id="laserball_teams" style="max-width:600px;"></canvas>
                <p>Laserball Teams</p>
            </div>
        </div>
        <canvas class="inline-block" id="avg_role_score" style="max-width: 500px; float: left;" height="200px"></canvas>
    </div>
    <script>
        Chart.defaults.global.defaultFontColor = "#FFFFFF";

        new Chart("sm5_teams", {
            type: "pie",
            // wins, inner
            data: {
                labels: ["Red", "Green", "Red Wins", "Green Wins"],
                datasets: [
                    {
                        backgroundColor: ["#b91d47", "#00aba9"],
                        data: [{{ red_teams_sm5 }}, {{ green_teams_sm5 }}]
                    },
                    {
                        backgroundColor: ["#000000", "#000000", "#b91d47", "#00aba9"],
                        data: [0, 0, {{ red_wins_sm5 }}, {{ green_wins_sm5}}]
                    }
                ]
            },


            options: {
                legend: {
                    display: false,
                    fullSize: false
                }
            }
        });

        new Chart("laserball_teams", {
            type: "pie",
            data: {
                labels: ["Red", "Blue"],
                datasets: [{
                backgroundColor: ["#b91d47", "#0047AB"],
                data: [{{ red_teams_laserball }}, {{ blue_teams_laserball }}]
                }]
            },
            options: {
                legend: {
                    display: false,
                    fullSize: false
                }
            }
        });

        new Chart("avg_role_score", {
            type: "bar",
            data: {
                labels: ["Commander", "Heavy", "Scout", "Ammo", "Medic"],
                datasets: [
                    {
                        label: "Player's Median Score",
                        data: {{ role_plot_data_player }},
                        backgroundColor: [
                            "rgb(50, 116, 161)",
                            "rgb(225, 129, 44)",
                            "rgb(58, 146, 58)",
                            "rgb(192, 61, 62)",
                            "rgb(147, 114, 178)"
                        ]
                    },
                    {
                        label: "World's Median Score",
                        data: {{ role_plot_data_world }},
                        backgroundColor: [
                            "rgb(50, 166, 161)",
                            "rgb(225, 179, 44)",
                            "rgb(58, 196, 58)",
                            "rgb(192, 121, 62)",
                            "rgb(147, 174, 178)"
                        ]
                    }
                ]
            },
            options: {
                responsive: true,
                scales: {
                    yAxes: [{
                        ticks:{
                            min: 0,
                        },
                        stacked: false,
                    }],
                    xAxes: {
                        gridLines: {
                            display: false,
                        },
                        stacked: false
                    },
                },
                plugins: {
                    legend: {
                        labels: {
                            color: "rgb(255, 255, 255)"
                        }
                    },
                    title: {
                        display: true,
                        text: "Median player score vs median world score"
                    }
                }
            }
        });
    </script>
</body>

{% endblock %}